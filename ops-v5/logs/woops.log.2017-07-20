2017-07-19 21:13:04,870-[DEBUG]-DB_mysql-mysql_exec.py[line:81/select_sql]-select_sql : "select app_name from cmdb_online ;"
2017-07-19 21:13:04,931-[DEBUG]-common_func-common_func.py[line:41/online_app_list]-module_name_list : [{'app_name': u'app'}, {'app_name': u'mop'}]
2017-07-19 21:13:11,430-[DEBUG]-DB_mysql-mysql_exec.py[line:81/select_sql]-select_sql : "select app_name from cmdb_online ;"
2017-07-19 21:13:11,434-[DEBUG]-common_func-common_func.py[line:41/online_app_list]-module_name_list : [{'app_name': u'app'}, {'app_name': u'mop'}]
2017-07-19 22:10:16,508-[DEBUG]-DB_mysql-mysql_exec.py[line:81/select_sql]-select_sql : "select id,login_name,name_cn,password,mobile,email,role,status,last_login_time from users where login_name="admin";"
2017-07-19 22:10:16,514-[DEBUG]-users-users.py[line:63/user_login]-select_login_info:(11L, u'admin', u'\u8bf8\u845b\u5b54\u660e', u'4bfd3be6dbd0c6888250de0640ec5905', u'15811110333', u'111@111.com', 0, 0, u'2017-07-18 23:21:34')
2017-07-19 22:10:16,514-[DEBUG]-users-users.py[line:68/user_login]-select_login_info_dict:{'status': 0, 'login_name': u'admin', 'last_login_time': u'2017-07-18 23:21:34', 'mobile': u'15811110333', 'name_cn': u'\u8bf8\u845b\u5b54\u660e', 'id': 11L, 'role': 0, 'password': u'4bfd3be6dbd0c6888250de0640ec5905', 'email': u'111@111.com'}
2017-07-19 22:10:16,515-[DEBUG]-DB_mysql-mysql_exec.py[line:53/update_sql]-update_sql : "update users set last_login_time='2017-07-19 22:10:16' where login_name='admin';"
2017-07-19 22:10:16,546-[INFO]-users-users.py[line:79/user_login]-"admin" login success
2017-07-19 22:10:17,669-[DEBUG]-DB_mysql-mysql_exec.py[line:94/general_sql]-select_sql : "SELECT TABLE_SCHEMA,TABLE_NAME,TABLE_ROWS FROM online_table_rows where UpdateTime like '2017-07-18%';"
2017-07-19 22:10:17,676-[DEBUG]-DB_mysql-mysql_exec.py[line:94/general_sql]-select_sql : "SELECT TABLE_SCHEMA,TABLE_NAME,TABLE_ROWS FROM online_table_rows where UpdateTime like '2017-07-19%';"
2017-07-19 22:19:55,807-[INFO]-users-users.py[line:182/user_logout]-User "admin" logout success
2017-07-20 11:21:06,305-[DEBUG]-DB_mysql-mysql_exec.py[line:81/select_sql]-select_sql : "select app_name from cmdb_online ;"
2017-07-20 11:21:06,325-[DEBUG]-common_func-common_func.py[line:41/online_app_list]-module_name_list : [{'app_name': u'h5-api'}, {'app_name': u'mop'}, {'app_name': u'trade'}, {'app_name': u'user'}]
2017-07-20 11:21:06,489-[DEBUG]-DB_mysql-mysql_exec.py[line:81/select_sql]-select_sql : "select app_name from cmdb_online ;"
2017-07-20 11:21:06,490-[DEBUG]-common_func-common_func.py[line:41/online_app_list]-module_name_list : [{'app_name': u'h5-api'}, {'app_name': u'mop'}, {'app_name': u'trade'}, {'app_name': u'user'}]
2017-07-20 12:13:42,920-[DEBUG]-DB_mysql-mysql_exec.py[line:81/select_sql]-select_sql : "select app_name from cmdb_online ;"
2017-07-20 12:13:42,921-[DEBUG]-common_func-common_func.py[line:41/online_app_list]-module_name_list : [{'app_name': u'h5-api'}, {'app_name': u'mop'}, {'app_name': u'trade'}, {'app_name': u'user'}]
2017-07-20 12:14:02,410-[DEBUG]-DB_mysql-mysql_exec.py[line:81/select_sql]-select_sql : "select app_name from cmdb_online ;"
2017-07-20 12:14:02,411-[DEBUG]-common_func-common_func.py[line:41/online_app_list]-module_name_list : [{'app_name': u'h5-api'}, {'app_name': u'mop'}, {'app_name': u'trade'}, {'app_name': u'user'}]
2017-07-20 12:14:02,587-[DEBUG]-DB_mysql-mysql_exec.py[line:81/select_sql]-select_sql : "select app_name from cmdb_online ;"
2017-07-20 12:14:02,588-[DEBUG]-common_func-common_func.py[line:41/online_app_list]-module_name_list : [{'app_name': u'h5-api'}, {'app_name': u'mop'}, {'app_name': u'trade'}, {'app_name': u'user'}]
2017-07-20 12:14:50,733-[DEBUG]-DB_mysql-mysql_exec.py[line:81/select_sql]-select_sql : "select id,login_name,name_cn,password,mobile,email,role,status,last_login_time from users where login_name="admin";"
2017-07-20 12:14:50,747-[DEBUG]-users-users.py[line:63/user_login]-select_login_info:(1L, u'admin', u'\u8bf8\u845b\u5b54\u660e', u'4bfd3be6dbd0c6888250de0640ec5905', u'15811110333', u'111@111.com', 0, 0, u'2017-07-12 11:06:59')
2017-07-20 12:14:50,748-[DEBUG]-users-users.py[line:68/user_login]-select_login_info_dict:{'status': 0, 'login_name': u'admin', 'last_login_time': u'2017-07-12 11:06:59', 'mobile': u'15811110333', 'name_cn': u'\u8bf8\u845b\u5b54\u660e', 'id': 1L, 'role': 0, 'password': u'4bfd3be6dbd0c6888250de0640ec5905', 'email': u'111@111.com'}
2017-07-20 12:14:50,748-[DEBUG]-DB_mysql-mysql_exec.py[line:53/update_sql]-update_sql : "update users set last_login_time='2017-07-20 12:14:50' where login_name='admin';"
2017-07-20 12:14:50,752-[INFO]-users-users.py[line:79/user_login]-"admin" login success
2017-07-20 12:14:51,614-[DEBUG]-DB_mysql-mysql_exec.py[line:94/general_sql]-select_sql : "SELECT TABLE_SCHEMA,TABLE_NAME,TABLE_ROWS FROM online_table_rows where UpdateTime like '2017-07-19%';"
2017-07-20 12:14:51,623-[DEBUG]-DB_mysql-mysql_exec.py[line:94/general_sql]-select_sql : "SELECT TABLE_SCHEMA,TABLE_NAME,TABLE_ROWS FROM online_table_rows where UpdateTime like '2017-07-20%';"
2017-07-20 14:49:16,634-[DEBUG]-DB_mysql-mysql_exec.py[line:81/select_sql]-select_sql : "select id,pub_title,workform_type,pub_level,pub_module,pub_content,pub_SQL,pub_SQL_detail,pub_application_people,pub_status,pub_audit_people,pub_submit_time,pub_done_time,pub_operation_people from publish_online ;"
2017-07-20 14:49:16,636-[DEBUG]-publish-workform_pub.py[line:62/pub_list]-pub_info_list : []
2017-07-20 14:49:16,638-[DEBUG]-DB_mysql-mysql_exec.py[line:81/select_sql]-select_sql : "select app_name from cmdb_online ;"
2017-07-20 14:49:16,639-[DEBUG]-common_func-common_func.py[line:41/online_app_list]-module_name_list : [{'app_name': u'h5-api'}, {'app_name': u'mop'}, {'app_name': u'trade'}, {'app_name': u'user'}]
2017-07-20 14:49:16,640-[DEBUG]-DB_mysql-mysql_exec.py[line:81/select_sql]-select_sql : "select id,pub_title,pub_level,pub_module,pub_content,pub_SQL,pub_SQL_detail,pub_application_people,workform_type,pub_status,pub_audit_people,pub_submit_time,audit_time,pub_done_time,pub_operation_people from publish_online where pub_application_people="admin";"
2017-07-20 14:49:16,641-[DEBUG]-publish-workform_pub.py[line:78/pub_my]-pub_my_list : []
2017-07-20 14:49:16,642-[DEBUG]-DB_mysql-mysql_exec.py[line:81/select_sql]-select_sql : "select id,pub_title,pub_level,pub_module,pub_SQL,pub_application_people,workform_type,pub_status,pub_submit_time,pub_audit_people,audit_time from publish_online where pub_status="0";"
2017-07-20 14:49:16,643-[DEBUG]-publish-workform_pub.py[line:94/pub_audit]-pub_audit_list : []
2017-07-20 14:49:29,715-[DEBUG]-DB_mysql-mysql_exec.py[line:81/select_sql]-select_sql : "select app_name from cmdb_online ;"
2017-07-20 14:49:29,716-[DEBUG]-common_func-common_func.py[line:41/online_app_list]-module_name_list : [{'app_name': u'h5-api'}, {'app_name': u'mop'}, {'app_name': u'trade'}, {'app_name': u'user'}]
2017-07-20 14:49:35,186-[DEBUG]-DB_mysql-mysql_exec.py[line:81/select_sql]-select_sql : "select app_ip from cmdb_online where app_name="mop";"
2017-07-20 14:49:35,197-[DEBUG]-DB_mysql-mysql_exec.py[line:94/general_sql]-select_sql : "select pub_app_version,pub_app_addr from pub_version_status where pub_app_name="mop" and pub_app_version_status in ("packaged","publishing") order by id DESC limit 5;"
2017-07-20 14:49:35,209-[ERROR]-DB_mysql-mysql_exec.py[line:101/general_sql]-select_sql : "select pub_app_version,pub_app_addr from pub_version_status where pub_app_name="mop" and pub_app_version_status in ("packaged","publishing") order by id DESC limit 5;",error: Traceback (most recent call last):
  File "/opt/ops-v5/utils/mysql_exec.py", line 97, in general_sql
    cur.execute(select_sql)
  File "/usr/lib/python2.7/site-packages/DBUtils-1.1-py2.7.egg/DBUtils/SteadyDB.py", line 631, in tough_method
    raise error # reraise the original error again
OperationalError: (1054, "Unknown column 'pub_app_addr' in 'field list'")

2017-07-20 14:49:43,369-[DEBUG]-DB_mysql-mysql_exec.py[line:81/select_sql]-select_sql : "select app_ip from cmdb_online where app_name="h5-api";"
2017-07-20 14:49:43,371-[DEBUG]-DB_mysql-mysql_exec.py[line:94/general_sql]-select_sql : "select pub_app_version,pub_app_addr from pub_version_status where pub_app_name="h5-api" and pub_app_version_status in ("packaged","publishing") order by id DESC limit 5;"
2017-07-20 14:49:43,374-[ERROR]-DB_mysql-mysql_exec.py[line:101/general_sql]-select_sql : "select pub_app_version,pub_app_addr from pub_version_status where pub_app_name="h5-api" and pub_app_version_status in ("packaged","publishing") order by id DESC limit 5;",error: Traceback (most recent call last):
  File "/opt/ops-v5/utils/mysql_exec.py", line 97, in general_sql
    cur.execute(select_sql)
  File "/usr/lib/python2.7/site-packages/DBUtils-1.1-py2.7.egg/DBUtils/SteadyDB.py", line 631, in tough_method
    raise error # reraise the original error again
OperationalError: (1054, "Unknown column 'pub_app_addr' in 'field list'")

2017-07-20 14:49:46,134-[DEBUG]-DB_mysql-mysql_exec.py[line:81/select_sql]-select_sql : "select id,app_name,app_ip,app_describe,app_way,domain,cdn_domain,app_path,app_shell,app_log,app_ports,status from cmdb_online ;"
2017-07-20 14:49:46,136-[DEBUG]-cmdb_online-cmdb_online.py[line:101/cmdb_online_list]-cmdb_online_list: [{'status': 0, 'app_path': u'/data/java/tomcat-mop', 'domain': u'', 'app_shell': u'/data/java/tomcat-mop/bin/start.sh', 'app_name': u'mop', 'app_ports': u'8080,8005,8009,8443', 'cdn_domain': u'', 'app_way': u'tomcat', 'app_log': u'/data/java/logs/mop/mop.log', 'app_describe': u'\u540e\u7aef\u8c03\u7528\u7edf\u4e00\u63a5\u53e3', 'app_ip': u'172.16.82.137<br>172.16.82.136<br>172.16.82.145', 'id': 3L}, {'status': 0, 'app_path': u'/data/java/tomcat-trade', 'domain': u'', 'app_shell': u'/data/java/tomcat-trade/bin/start.sh', 'app_name': u'trade', 'app_ports': u'8080,8005,8009,8443', 'cdn_domain': u'', 'app_way': u'tomcat', 'app_log': u'/data/java/logs/trade/root/log', 'app_describe': u'\u4ea4\u6613', 'app_ip': u'172.16.82.137<br>172.16.82.136<br>172.16.82.145', 'id': 4L}, {'status': 0, 'app_path': u'/data/java/tomcat-user', 'domain': u'', 'app_shell': u'/data/java/tomcat-user/bin/start.sh', 'app_name': u'user', 'app_ports': u'8080,8009,8005,8443', 'cdn_domain': u'', 'app_way': u'tomcat', 'app_log': u'/data/java/logs/user/root.log', 'app_describe': u'\u7528\u6237\u63a5\u53e3', 'app_ip': u'172.16.82.129<br>172.16.82.128', 'id': 5L}, {'status': 0, 'app_path': u'/data/H5-API', 'domain': u'', 'app_shell': u'nmp list', 'app_name': u'h5-api', 'app_ports': u'9090', 'cdn_domain': u'', 'app_way': u'node', 'app_log': u'', 'app_describe': u'h5 \u63a5\u53e3', 'app_ip': u'172.16.82.131<br>172.16.82.134', 'id': 6L}]
2017-07-20 14:49:55,459-[DEBUG]-DB_mysql-mysql_exec.py[line:81/select_sql]-select_sql : "select app_name from cmdb_online ;"
2017-07-20 14:49:55,461-[DEBUG]-common_func-common_func.py[line:41/online_app_list]-module_name_list : [{'app_name': u'h5-api'}, {'app_name': u'mop'}, {'app_name': u'trade'}, {'app_name': u'user'}]
2017-07-20 14:49:57,650-[DEBUG]-DB_mysql-mysql_exec.py[line:94/general_sql]-select_sql : "select id,app_name_detail,app_version_detail,app_opera_type,app_ip_detail,app_opera_detail,app_opera_status,opera_start_time,opera_end_time from pub_history_detail where opera_start_time >= "2017-06-20 14:49:57" order by id DESC;"
2017-07-20 14:49:57,651-[ERROR]-DB_mysql-mysql_exec.py[line:101/general_sql]-select_sql : "select id,app_name_detail,app_version_detail,app_opera_type,app_ip_detail,app_opera_detail,app_opera_status,opera_start_time,opera_end_time from pub_history_detail where opera_start_time >= "2017-06-20 14:49:57" order by id DESC;",error: Traceback (most recent call last):
  File "/opt/ops-v5/utils/mysql_exec.py", line 97, in general_sql
    cur.execute(select_sql)
  File "/usr/lib/python2.7/site-packages/DBUtils-1.1-py2.7.egg/DBUtils/SteadyDB.py", line 552, in tough_method
    result = method(*args, **kwargs) # try to execute
  File "/usr/lib64/python2.7/site-packages/MySQLdb/cursors.py", line 205, in execute
    self.errorhandler(self, exc, value)
  File "/usr/lib64/python2.7/site-packages/MySQLdb/connections.py", line 36, in defaulterrorhandler
    raise errorclass, errorvalue
ProgrammingError: (1146, "Table 'dev_ops.pub_history_detail' doesn't exist")

2017-07-20 14:50:56,180-[DEBUG]-DB_mysql-mysql_exec.py[line:81/select_sql]-select_sql : "select app_name from cmdb_online ;"
2017-07-20 14:50:56,181-[DEBUG]-common_func-common_func.py[line:41/online_app_list]-module_name_list : [{'app_name': u'h5-api'}, {'app_name': u'mop'}, {'app_name': u'trade'}, {'app_name': u'user'}]
2017-07-20 15:14:52,580-[DEBUG]-DB_mysql-mysql_exec.py[line:81/select_sql]-select_sql : "select app_name from cmdb_online ;"
2017-07-20 15:14:52,581-[DEBUG]-common_func-common_func.py[line:41/online_app_list]-module_name_list : [{'app_name': u'h5-api'}, {'app_name': u'mop'}, {'app_name': u'trade'}, {'app_name': u'user'}]
2017-07-20 15:45:00,135-[DEBUG]-DB_mysql-mysql_exec.py[line:81/select_sql]-select_sql : "select app_name from cmdb_online ;"
2017-07-20 15:45:00,136-[DEBUG]-common_func-common_func.py[line:41/online_app_list]-module_name_list : [{'app_name': u'h5-api'}, {'app_name': u'mop'}, {'app_name': u'trade'}, {'app_name': u'user'}]
2017-07-20 19:38:01,353-[DEBUG]-DB_mysql-mysql_exec.py[line:81/select_sql]-select_sql : "select app_name from cmdb_online ;"
2017-07-20 19:38:01,354-[DEBUG]-common_func-common_func.py[line:41/online_app_list]-module_name_list : [{'app_name': u'h5-api'}, {'app_name': u'mop'}, {'app_name': u'trade'}, {'app_name': u'user'}]
2017-07-20 19:38:01,509-[DEBUG]-DB_mysql-mysql_exec.py[line:81/select_sql]-select_sql : "select app_name from cmdb_online ;"
2017-07-20 19:38:01,510-[DEBUG]-common_func-common_func.py[line:41/online_app_list]-module_name_list : [{'app_name': u'h5-api'}, {'app_name': u'mop'}, {'app_name': u'trade'}, {'app_name': u'user'}]
2017-07-20 19:46:05,974-[INFO]-users-users.py[line:182/user_logout]-User "admin" logout success
2017-07-20 19:56:02,418-[DEBUG]-DB_mysql-mysql_exec.py[line:81/select_sql]-select_sql : "select id,login_name,name_cn,password,mobile,email,role,status,last_login_time from users where login_name="admin";"
2017-07-20 19:56:02,419-[DEBUG]-users-users.py[line:63/user_login]-select_login_info:(1L, u'admin', u'\u8bf8\u845b\u5b54\u660e', u'4bfd3be6dbd0c6888250de0640ec5905', u'15811110333', u'111@111.com', 0, 0, u'2017-07-20 12:14:50')
2017-07-20 19:56:02,419-[DEBUG]-users-users.py[line:68/user_login]-select_login_info_dict:{'status': 0, 'login_name': u'admin', 'last_login_time': u'2017-07-20 12:14:50', 'mobile': u'15811110333', 'name_cn': u'\u8bf8\u845b\u5b54\u660e', 'id': 1L, 'role': 0, 'password': u'4bfd3be6dbd0c6888250de0640ec5905', 'email': u'111@111.com'}
2017-07-20 19:56:02,420-[DEBUG]-DB_mysql-mysql_exec.py[line:53/update_sql]-update_sql : "update users set last_login_time='2017-07-20 19:56:02' where login_name='admin';"
2017-07-20 19:56:02,431-[INFO]-users-users.py[line:79/user_login]-"admin" login success
2017-07-20 19:56:03,452-[DEBUG]-DB_mysql-mysql_exec.py[line:94/general_sql]-select_sql : "SELECT TABLE_SCHEMA,TABLE_NAME,TABLE_ROWS FROM online_table_rows where UpdateTime like '2017-07-19%';"
2017-07-20 19:56:03,459-[DEBUG]-DB_mysql-mysql_exec.py[line:94/general_sql]-select_sql : "SELECT TABLE_SCHEMA,TABLE_NAME,TABLE_ROWS FROM online_table_rows where UpdateTime like '2017-07-20%';"
2017-07-20 21:05:06,738-[INFO]-users-users.py[line:182/user_logout]-User "admin" logout success
